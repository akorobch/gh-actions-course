name: 17 - 2 - Custom Actions - JS

on:
    workflow_dispatch:
        inputs:
            base-branch:
                required: false
                description: The branch used as the base for the dependency update checks
                default: main
            target-branch:
                required: false
                description: The branch from which the PR is created
                default: update-dependencies
            working-directory:
                required: true
                description: The working directory of the project to check for dependency updates
            github-token:
                required: true
                description: Authentication token with repository access. Must have write access to contents and pull-requests
            debug: 
                required: false
                type: choice
                options: [false, true]
                description: Whether the output debug messages to the console

run-name: 17 - 2 - Custom Actions - JS | env - ${{ inputs.base-branch }} - ${{ inputs.target-branch }} - ${{ inputs.working-directory }} - ${{ inputs.debug }}

jobs:
    dependency_update:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout the code
              uses: actions/checkout@v4
            - name: Check for dependency updates
              uses: ./.github/actions/js-dependency-update
              with: 
                base-branch: ${{inputs.base-branch}}
                target-branch: ${{inputs.target-branch}}
                working-directory: ${{inputs.working-directory}}
                github-token: ${{secrets.GITHUB_TOKEN }}
                debug: ${{inputs.debug}}